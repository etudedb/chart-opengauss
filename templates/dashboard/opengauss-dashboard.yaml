{{- if .Values.metrics.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-opengauss-dashboard
  namespace: {{ include "opengauss.serviceMonitor.namespace" . | default .Release.Namespace }}
  labels:
    grafana_dashboard: '1'
data:
  opengauss-single.json: |-
    {{`{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"description":"This dashboard works with opengauss_exporter for prometheus","editable":true,"fiscalYearStartMonth":0,"gnetId":9628,"graphTooltip":2,"id":10,"iteration":1638259752651,"links":[],"liveNow":false,"panels":[{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":88,"panels":[],"title":"General Information","type":"row"},{"datasource":null,"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":2,"w":4,"x":0,"y":1},"id":99,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"name"},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"pg_up","interval":"","legendFormat":"{{server}}","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Instance","type":"stat"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":2,"w":4,"x":4,"y":1},"id":36,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"text":{},"textMode":"name"},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"pg_version","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"{{short_version}}","refId":"A"}],"title":"Version","type":"stat"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"1":{"index":0,"text":"primary"}},"type":"value"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"s"},"overrides":[]},"gridPos":{"h":2,"w":4,"x":8,"y":1},"id":95,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"value"},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"pg_run_times_run_time","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"DB Runtimes","type":"stat"},{"datasource":null,"fieldConfig":{"defaults":{"mappings":[{"options":{"1":{"text":"Up"},"O":{"text":"Down"}},"type":"value"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":2,"w":4,"x":12,"y":1},"id":94,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.2.4","targets":[{"expr":"1 - (sum(absent(pg_up{instance=\"$instance\"})) or vector(0))","interval":"","legendFormat":"","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Exporter","type":"stat"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"1":{"index":0,"text":"primary"}},"type":"value"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"s"},"overrides":[]},"gridPos":{"h":2,"w":4,"x":16,"y":1},"id":109,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"value"},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"pg_exporter_uptime","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Exporter Runtimes","type":"stat"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"1":{"index":0,"text":"primary"}},"type":"value"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":2,"w":4,"x":20,"y":1},"id":92,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"text":{},"textMode":"value"},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"pg_run_times_db_role","format":"time_series","instant":true,"interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Role","type":"stat"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"mappings":[{"options":{"0":{"text":"None"}},"type":"value"},{"options":{"match":"null","result":{"text":"Ø"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"rgb(187, 187, 187)","value":null},{"color":"green","value":0}]},"unit":"decbytes"},"overrides":[]},"gridPos":{"h":2,"w":4,"x":0,"y":3},"id":108,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"sum(pg_database_size_bytes{instance=\"$instance\"})","format":"table","instant":true,"interval":"","legendFormat":"","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Cluster Size","type":"stat"},{"cacheTimeout":null,"datasource":null,"description":"当前事务数,统计提交和回滚xact_commit+xact_rollback","fieldConfig":{"defaults":{"color":{"fixedColor":"rgb(31, 120, 193)","mode":"fixed"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":6,"w":16,"x":4,"y":3},"id":97,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"area","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.2.4","targets":[{"expr":"sum(irate(pg_stat_database_xact_commit{datname=~\"$datname\", instance=~\"$instance\"}[5m])) + sum(irate(pg_stat_database_xact_rollback{datname=~\"$datname\", instance=~\"$instance\"}[5m]))","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"","refId":"A"}],"title":"TPS","type":"stat"},{"datasource":null,"fieldConfig":{"defaults":{"mappings":[{"options":{"0":{"text":"None"}},"type":"value"},{"options":{"match":"null","result":{"color":"green","text":"0"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":2,"w":4,"x":20,"y":3},"id":101,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"count(pg_downstream_count{instance=\"$instance\", state=\"Streaming\"})","instant":true,"interval":"","legendFormat":"","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Downstreams","type":"stat"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"fixedColor":"green","mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":2,"w":4,"x":0,"y":5},"id":102,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"pg_settings_max_process_memory_bytes{instance=\"$instance\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Max Process Memory","type":"stat"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":2,"w":4,"x":20,"y":5},"id":40,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.2.4","targets":[{"expr":"pg_settings_shared_buffers_bytes{instance=\"$instance\"}","format":"time_series","intervalFactor":1,"refId":"A"}],"title":"Shared Buffers","type":"stat"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"none"},"overrides":[]},"gridPos":{"h":2,"w":4,"x":0,"y":7},"id":106,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"pg_settings_max_connections{instance=\"$instance\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Max Connections","type":"stat"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":2,"w":4,"x":20,"y":7},"id":103,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"pg_settings_work_mem_bytes{instance=\"$instance\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Work Mem","type":"stat"},{"cacheTimeout":null,"datasource":"Prometheus","description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":50},{"color":"rgba(245, 54, 54, 0.9)","value":80}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":0,"y":9},"id":136,"interval":null,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"text":{}},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"sum(pg_connections_used_conn) / sum(pg_setting_max_connections) * 100","hide":false,"interval":"","legendFormat":"","refId":"B"}],"title":"Connections","type":"gauge"},{"cacheTimeout":null,"datasource":"Prometheus","description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":50},{"color":"rgba(245, 54, 54, 0.9)","value":80}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":6,"y":9},"id":141,"interval":null,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"text":{}},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"sum(og_memory_info_memorymbytes{memorytype=\"process_used_memory\"}) / sum(og_memory_info_memorymbytes{memorytype=\"max_process_memory\"}) * 100","hide":false,"interval":"","legendFormat":"","refId":"B"}],"title":"Total Memory","type":"gauge"},{"cacheTimeout":null,"datasource":"Prometheus","description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":50},{"color":"rgba(245, 54, 54, 0.9)","value":80}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":12,"y":9},"id":137,"interval":null,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"text":{}},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"sum(og_memory_info_memorymbytes{memorytype=\"dynamic_used_memory\"}) / sum(og_memory_info_memorymbytes{memorytype=\"max_dynamic_memory\"}) * 100","hide":false,"interval":"","legendFormat":"","refId":"B"}],"title":"Dynamic Memory","type":"gauge"},{"cacheTimeout":null,"datasource":"Prometheus","description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":50},{"color":"rgba(245, 54, 54, 0.9)","value":80}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":18,"y":9},"id":139,"interval":null,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"text":{}},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"count(pg_replication_slots_active) / sum(pg_setting_max_replication_slots) * 100","hide":false,"interval":"","legendFormat":"","refId":"B"}],"title":"Slot Rate","type":"gauge"},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":13},"id":86,"panels":[],"title":"Memory","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":8,"x":0,"y":14},"hiddenSeries":false,"id":146,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":3,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"exemplar":true,"expr":"og_memory_info_memorymbytes{memorytype=~\"max_process_memory|process_used_memory|shared_used_memory|dynamic_used_memory\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{memorytype}}","refId":"A","step":2}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Memory Used","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:165","decimals":0,"format":"mbytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:166","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false}},"links":[],"mappings":[]},"overrides":[]},"gridPos":{"h":7,"w":8,"x":8,"y":14},"id":115,"links":[],"options":{"displayLabels":[],"legend":{"displayMode":"table","placement":"right","values":["percent"]},"pieType":"pie","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"tooltip":{"mode":"single"}},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"og_memory_info_memorymbytes{memorytype=~\"backend_used_memory|cstore_used_memory|dynamic_used_memory|dynamic_used_shrctx|gpu_dynamic_used_memory|other_used_memory|pooler_conn_memory|pooler_freeconn_memory|sctpcomm_used_memory|shared_used_memory\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{memorytype}}","refId":"A","step":2}],"timeFrom":null,"timeShift":null,"title":"Memory Used Rate","type":"piechart"},{"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false}},"links":[],"mappings":[]},"overrides":[]},"gridPos":{"h":7,"w":8,"x":16,"y":14},"id":147,"links":[],"options":{"displayLabels":[],"legend":{"displayMode":"table","placement":"right","values":["percent"]},"pieType":"pie","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"tooltip":{"mode":"single"}},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"og_memory_info_memorymbytes{memorytype=~\"dynamic_peak_memory|dynamic_peak_shrctx|gpu_dynamic_peak_memory|sctpcomm_peak_memory\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{memorytype}}","refId":"A","step":2}],"timeFrom":null,"timeShift":null,"title":"Memory Peak Rate","type":"piechart"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fieldConfig":{"defaults":{"links":[],"unit":"decbytes"},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":0,"y":21},"hiddenSeries":false,"id":113,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":3,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"exemplar":true,"expr":"og_state_memory_totalsize{instance=~\"$instance\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{state}}_totalsize","refId":"A","step":2}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Session State Memory","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:165","decimals":0,"format":"decbytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:166","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fieldConfig":{"defaults":{"links":[],"unit":"decbytes"},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":12,"y":21},"hiddenSeries":false,"id":112,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":3,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"exemplar":true,"expr":"og_context_memory_totalsize{instance=~\"$instance\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{contextname}}_totalsize","refId":"A","step":2},{"exemplar":true,"expr":"og_context_memory_usedsize{instance=~\"$instance\"}","hide":false,"interval":"","legendFormat":"{{contextname}}_usedsize","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Context Memory","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:165","decimals":0,"format":"decbytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:166","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"datasource":null,"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":null,"displayMode":"auto","filterable":false,"minWidth":256},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byName","options":"client_addr"},"properties":[{"id":"custom.width","value":128}]},{"matcher":{"id":"byName","options":"sessionid"},"properties":[{"id":"custom.width","value":150}]},{"matcher":{"id":"byName","options":"application_name"},"properties":[{"id":"custom.width","value":200}]},{"matcher":{"id":"byName","options":"Value"},"properties":[{"id":"unit","value":"decbytes"},{"id":"noValue","value":"0"},{"id":"custom.width","value":128}]}]},"gridPos":{"h":8,"w":24,"x":0,"y":28},"id":111,"options":{"showHeader":true,"sortBy":[{"desc":true,"displayName":"Value"}]},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"og_session_memory_totalsize{instance=~\"$instance\"}","format":"table","instant":true,"interval":"","legendFormat":"","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Session Memory Totalsize","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true,"Value":false,"__name__":true,"instance":true,"job":true,"server":true},"indexByName":{"Time":0,"Value":8,"__name__":1,"application_name":6,"client_addr":2,"instance":3,"job":4,"query":9,"server":5,"sessionid":7},"renameByName":{"Value":""}}}],"type":"table"},{"datasource":null,"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":null,"displayMode":"auto","filterable":false,"minWidth":256},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byName","options":"client_addr"},"properties":[{"id":"custom.width","value":128}]},{"matcher":{"id":"byName","options":"sessionid"},"properties":[{"id":"custom.width","value":150}]},{"matcher":{"id":"byName","options":"application_name"},"properties":[{"id":"custom.width","value":200}]},{"matcher":{"id":"byName","options":"Value"},"properties":[{"id":"unit","value":"decbytes"},{"id":"noValue","value":"0"},{"id":"custom.width","value":128}]}]},"gridPos":{"h":8,"w":24,"x":0,"y":36},"id":131,"options":{"showHeader":true,"sortBy":[{"desc":true,"displayName":"Value"}]},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"og_session_memory_usedsize{instance=~\"$instance\"}","format":"table","instant":true,"interval":"","legendFormat":"","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Session Memory Usedsize","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true,"Value":false,"__name__":true,"instance":true,"job":true,"server":true},"indexByName":{"Time":0,"Value":8,"__name__":1,"application_name":6,"client_addr":2,"instance":3,"job":4,"query":9,"server":5,"sessionid":7},"renameByName":{"Value":""}}}],"type":"table"},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":44},"id":84,"panels":[],"title":"Connections","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fieldConfig":{"defaults":{"links":[],"unit":"none"},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":0,"y":45},"hiddenSeries":false,"id":1,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":3,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"exemplar":true,"expr":"pg_connections_max_conn","hide":false,"interval":"","legendFormat":"max_connections","refId":"B"},{"exemplar":true,"expr":"pg_connections_used_conn","hide":false,"interval":"","legendFormat":"used_connections","refId":"C"},{"exemplar":true,"expr":"pg_connections_res_for_normal","hide":false,"interval":"","legendFormat":"free_connections","refId":"D"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"connections","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:165","decimals":0,"format":"none","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:166","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fieldConfig":{"defaults":{"links":[],"unit":"none"},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":12,"y":45},"hiddenSeries":false,"id":116,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":3,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"exemplar":true,"expr":"pg_stat_activity_count{datname=~\"$datname\", instance=~\"$instance\",state=~\"active\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{datname}}","refId":"A","step":2}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Active","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:165","decimals":0,"format":"none","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:166","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":0,"y":52},"hiddenSeries":false,"id":4,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"sort":"current","sortDesc":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"exemplar":true,"expr":"pg_stat_activity_count{datname=~\"$datname\", instance=~\"$instance\", state=~\"idle in transaction|idle in transaction (aborted)\"}","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"{{datname}}","refId":"A","step":2}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Idle in transaction","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:262","format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"$$hashKey":"object:263","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":12,"y":52},"hiddenSeries":false,"id":117,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"sort":"current","sortDesc":false,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"exemplar":true,"expr":"pg_stat_activity_count{datname=~\"$datname\", instance=~\"$instance\", state=~\"idle\"}","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"{{datname}}","refId":"A","step":2}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Idle","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:262","format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"$$hashKey":"object:263","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false}},"links":[],"mappings":[],"unit":"none"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":0,"y":59},"id":148,"links":[],"options":{"legend":{"displayMode":"table","placement":"right","values":["percent","value"]},"pieType":"pie","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"tooltip":{"mode":"single"}},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"pg_stat_activity_count{datname=~\"$datname\", instance=~\"$instance\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{datname}}_{{state}}","refId":"A","step":2}],"timeFrom":null,"timeShift":null,"title":"Session State Rate","type":"piechart"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":12,"y":59},"hiddenSeries":false,"id":91,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"exemplar":true,"expr":"sum(pg_session_connection_count)by(client_addr)","format":"time_series","interval":"","intervalFactor":2,"legendFormat":"{{client_addr}}","refId":"A","step":2}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"sessions_count","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:262","format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"$$hashKey":"object:263","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":66},"id":82,"panels":[],"title":"Replications","type":"row"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":2,"w":4,"x":0,"y":67},"id":38,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"pg_settings_max_replication_slots","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"","refId":"A"}],"title":"Max Slots","type":"stat"},{"datasource":null,"description":"","fieldConfig":{"defaults":{"custom":{"align":null,"displayMode":"auto","filterable":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byName","options":"state"},"properties":[{"id":"custom.width","value":128}]},{"matcher":{"id":"byName","options":"client_addr"},"properties":[{"id":"custom.width","value":142}]},{"matcher":{"id":"byName","options":"application_name"},"properties":[{"id":"custom.width","value":256}]},{"matcher":{"id":"byName","options":"Time"},"properties":[{"id":"custom.width","value":150}]}]},"gridPos":{"h":7,"w":13,"x":4,"y":67},"id":118,"options":{"showHeader":true,"sortBy":[]},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"pg_replication_backend_uptime{instance=~\"$instance\"}","format":"table","instant":true,"interval":"","legendFormat":"","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Replication Informations","transformations":[{"id":"organize","options":{"excludeByName":{"Time":false,"Value":true,"__name__":true,"instance":true,"job":true,"pid":true,"server":true},"indexByName":{"Time":0,"Value":7,"__name__":1,"application_name":8,"client_addr":2,"instance":3,"job":4,"pid":5,"server":6,"state":9,"sync_state":10},"renameByName":{}}}],"type":"table"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":7,"x":17,"y":67},"hiddenSeries":false,"id":125,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":3,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"exemplar":true,"expr":"pg_replication_replay_diff{instance=~\"$instance\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{instance}}_replay_diff","refId":"A","step":2},{"exemplar":true,"expr":"pg_replication_write_diff{instance=~\"$instance\"}","hide":false,"interval":"","legendFormat":"{{instance}}_write_diff","refId":"B"},{"exemplar":true,"expr":"pg_replication_flush_diff{instance=~\"$instance\"}","hide":false,"interval":"","legendFormat":"{{instance}}_flush_diff","refId":"C"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Replication Delay","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:165","decimals":0,"format":"decbytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:166","format":"decbytes","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"cacheTimeout":null,"datasource":"Prometheus","description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"rgba(50, 172, 45, 0.97)","value":null},{"color":"rgba(237, 129, 40, 0.89)","value":50},{"color":"rgba(245, 54, 54, 0.9)","value":80}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":5,"w":4,"x":0,"y":69},"id":122,"interval":null,"links":[],"maxDataPoints":100,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"text":{}},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"count(pg_replication_slots_active) / sum(pg_setting_max_replication_slots) * 100","hide":false,"interval":"","legendFormat":"","refId":"B"}],"title":"Slot Rate","type":"gauge"},{"datasource":null,"description":"","fieldConfig":{"defaults":{"custom":{"align":null,"displayMode":"auto","filterable":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byName","options":"database"},"properties":[{"id":"custom.width","value":128}]},{"matcher":{"id":"byName","options":"slot_name"},"properties":[{"id":"custom.width","value":142}]},{"matcher":{"id":"byName","options":"active"},"properties":[{"id":"custom.width","value":100},{"id":"mappings","value":[{"options":{"0":{"index":1,"text":"f"},"1":{"index":0,"text":"t"}},"type":"value"}]}]},{"matcher":{"id":"byName","options":"Time"},"properties":[{"id":"custom.width","value":150}]},{"matcher":{"id":"byName","options":"slot_name"},"properties":[{"id":"custom.width","value":256}]}]},"gridPos":{"h":7,"w":16,"x":0,"y":74},"id":149,"options":{"showHeader":true,"sortBy":[]},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"pg_replication_slots_active{instance=~\"$instance\"}","format":"table","instant":true,"interval":"","legendFormat":"","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Slot Informations","transformations":[{"id":"organize","options":{"excludeByName":{"Time":false,"Value":false,"__name__":true,"datoid":true,"instance":true,"job":true,"pid":true,"server":true,"xmin":true},"indexByName":{"Time":0,"Value":6,"__name__":1,"database":10,"datoid":8,"instance":2,"job":3,"plugin":9,"server":5,"slot_name":4,"slot_type":7,"xmin":11},"renameByName":{"Value":"active"}}}],"type":"table"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":0,"fillGradient":0,"gridPos":{"h":7,"w":8,"x":16,"y":74},"hiddenSeries":false,"id":120,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":3,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"exemplar":true,"expr":"pg_replication_slots_delay_lsn{instance=~\"$instance\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{instance}}_delay_lsn","refId":"A","step":2}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Slots Delay","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:165","decimals":0,"format":"decbytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:166","format":"decbytes","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":81},"id":80,"panels":[],"title":"Locks & Wait Events","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":8,"x":0,"y":82},"hiddenSeries":false,"id":126,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":false,"max":true,"min":false,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null as zero","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":3,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"exemplar":true,"expr":"pg_locker_count{instance=~\"$instance\"}","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{query}}","refId":"A","step":2}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Locker Count","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transformations":[],"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:165","decimals":0,"format":"none","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:166","format":"decbytes","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":true,"dashLength":10,"dashes":false,"datasource":null,"decimals":0,"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":9,"x":8,"y":82},"hiddenSeries":false,"id":124,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"sort":"max","sortDesc":true,"total":false,"values":true},"lines":false,"linewidth":1,"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":2,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"AccessShareLock","color":"#56A64B"},{"alias":"RowShareLock","color":"#8AB8FF"},{"alias":"RowExclusiveLock","color":"#3274D9"},{"alias":"ShareUpdateExclusiveLock","color":"#F2CC0C"},{"alias":"ShareLock","color":"#CC9D00"},{"alias":"ShareRowExclusiveLock","color":"#FF780A"},{"alias":"ExclusiveLock","color":"#E02F44"},{"alias":"AccessExclusiveLock","color":"#A352CC"}],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum by (mode) (pg_lock_count{instance=\"$instance\"})","legendFormat":"{{ mode }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Locks","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","decimals":0,"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":7,"x":17,"y":82},"hiddenSeries":false,"id":66,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"rightSide":false,"show":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(pg_stat_database_conflicts{instance=\"$instance\", datname=~\"$datname\"}[5m])","format":"time_series","intervalFactor":1,"legendFormat":"{{datname}} conflicts","refId":"B"},{"expr":"irate(pg_stat_database_deadlocks{instance=\"$instance\", datname=~\"$datname\"}[5m])","format":"time_series","intervalFactor":1,"legendFormat":"{{datname}} deadlocks","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Conflicts/Deadlocks","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:3060","format":"short","label":null,"logBase":1,"max":null,"min":"0","show":true},{"$$hashKey":"object:3061","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"datasource":null,"description":"会话","fieldConfig":{"defaults":{"custom":{"align":null,"displayMode":"auto","filterable":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byName","options":"state"},"properties":[{"id":"custom.width","value":94}]},{"matcher":{"id":"byName","options":"xact_runtime"},"properties":[{"id":"custom.width","value":142}]},{"matcher":{"id":"byName","options":"usename"},"properties":[{"id":"custom.width","value":156}]}]},"gridPos":{"h":8,"w":24,"x":0,"y":90},"id":119,"options":{"showHeader":true,"sortBy":[]},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"pg_lock_detail_locked_times{instance=~\"$instance\"}","format":"table","instant":true,"interval":"","legendFormat":"","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Lock Detail","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true,"Value":true,"__name__":true,"instance":true,"job":true,"server":true},"indexByName":{"Time":0,"Value":14,"__name__":1,"client_addr":2,"datname":4,"instance":3,"job":6,"pid":7,"query":10,"query_start":9,"server":11,"state":8,"usename":5,"xact_runtime":12,"xact_start":13},"renameByName":{}}}],"type":"table"},{"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false}},"links":[],"mappings":[]},"overrides":[]},"gridPos":{"h":8,"w":9,"x":0,"y":98},"id":144,"links":[],"options":{"displayLabels":[],"legend":{"displayMode":"table","placement":"right","values":["value"]},"pieType":"pie","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"tooltip":{"mode":"single"}},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"irate(pg_wait_events_wait{instance=~\"$instance\"}[1m]) != 0","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{event}}","refId":"A","step":2}],"timeFrom":null,"timeShift":null,"title":"Wait Event Count","type":"piechart"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":15,"x":9,"y":98},"hiddenSeries":false,"id":129,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":3,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"exemplar":true,"expr":"irate(pg_wait_events_wait{instance=~\"$instance\"}[1m]) != 0","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{event}}","refId":"A","step":2}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Wait Event Count","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:165","decimals":0,"format":"none","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:166","format":"decbytes","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false}},"links":[],"mappings":[],"unit":"µs"},"overrides":[]},"gridPos":{"h":8,"w":9,"x":0,"y":106},"id":145,"links":[],"options":{"displayLabels":[],"legend":{"displayMode":"table","placement":"right","values":["value"]},"pieType":"pie","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"tooltip":{"mode":"single"}},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"irate(pg_wait_events_total_wait_time{instance=~\"$instance\",event !=\"wait cmd\"}[1m]) != 0","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{event}}","refId":"A","step":2}],"timeFrom":null,"timeShift":null,"title":"Wait Event Times","type":"piechart"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":8,"w":15,"x":9,"y":106},"hiddenSeries":false,"id":130,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":3,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"exemplar":true,"expr":"irate(pg_wait_events_total_wait_time{instance=~\"$instance\"}[1m]) != 0","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{event}}","refId":"A","step":2}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Wait Event Times","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:165","decimals":0,"format":"µs","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:166","format":"decbytes","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":114},"id":78,"panels":[],"title":"Database Statistics","type":"row"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"decbytes"},"overrides":[]},"gridPos":{"h":2,"w":4,"x":0,"y":115},"id":10,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.2.4","targets":[{"expr":"SUM(pg_stat_database_tup_fetched{datname=~\"$datname\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"refId":"A","step":4}],"title":"Current fetch data","type":"stat"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":6,"w":6,"x":4,"y":115},"hiddenSeries":false,"id":60,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"rightSide":false,"show":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(pg_stat_database_xact_commit{instance=\"$instance\", datname=~\"$datname\"}[5m])","format":"time_series","intervalFactor":1,"legendFormat":"{{datname}} commits","refId":"A"},{"expr":"irate(pg_stat_database_xact_rollback{instance=\"$instance\", datname=~\"$datname\"}[5m])","format":"time_series","intervalFactor":1,"legendFormat":"{{datname}} rollbacks","refId":"B"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Transactions","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2972","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2973","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":6,"w":7,"x":10,"y":115},"hiddenSeries":false,"id":14,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"rightSide":false,"show":true,"sort":"total","sortDesc":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"pg_stat_database_tup_returned{datname=~\"$datname\", instance=~\"$instance\"} != 0","format":"time_series","intervalFactor":2,"legendFormat":"{{datname}}","refId":"A","step":2}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Return data","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2652","format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2653","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":6,"w":7,"x":17,"y":115},"hiddenSeries":false,"id":5,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"pg_stat_database_tup_fetched{datname=~\"$datname\", instance=~\"$instance\"} != 0","format":"time_series","intervalFactor":2,"legendFormat":"{{datname}}","refId":"A","step":2}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Fetch data (SELECT)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2572","format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2573","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"decbytes"},"overrides":[]},"gridPos":{"h":2,"w":4,"x":0,"y":117},"id":11,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.2.4","targets":[{"expr":"SUM(pg_stat_database_tup_inserted{release=\"$release\", datname=~\"$datname\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"refId":"A","step":4}],"title":"Current insert data","type":"stat"},{"cacheTimeout":null,"datasource":"Prometheus","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"match":"null","result":{"text":"N/A"}},"type":"special"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"decbytes"},"overrides":[]},"gridPos":{"h":2,"w":4,"x":0,"y":119},"id":12,"interval":null,"links":[],"maxDataPoints":100,"options":{"colorMode":"none","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.2.4","targets":[{"expr":"SUM(pg_stat_database_tup_updated{datname=~\"$datname\", instance=~\"$instance\"})","format":"time_series","intervalFactor":2,"refId":"A","step":4}],"title":"Current update data","type":"stat"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":8,"x":0,"y":121},"hiddenSeries":false,"id":6,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"pg_stat_database_tup_inserted{datname=~\"$datname\", instance=~\"$instance\"} != 0","format":"time_series","intervalFactor":2,"legendFormat":"{{datname}}","refId":"A","step":2}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Insert data","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2732","format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2733","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":8,"x":8,"y":121},"hiddenSeries":false,"id":8,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"rightSide":false,"show":true,"sideWidth":null,"sort":"current","sortDesc":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"pg_stat_database_tup_updated{datname=~\"$datname\", instance=~\"$instance\"} != 0","format":"time_series","intervalFactor":2,"legendFormat":"{{datname}}","refId":"A","step":2}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Update data","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2812","format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2813","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fieldConfig":{"defaults":{"links":[]},"overrides":[]},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":8,"x":16,"y":121},"hiddenSeries":false,"id":7,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"rightSide":false,"show":true,"sort":"current","sortDesc":true,"total":true,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"pg_stat_database_tup_deleted{datname=~\"$datname\", instance=~\"$instance\"} != 0","format":"time_series","intervalFactor":2,"legendFormat":"{{datname}}","refId":"A","step":2}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Delete data","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:2892","format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:2893","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":8,"x":0,"y":128},"hiddenSeries":false,"id":64,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(pg_stat_bgwriter_buffers_backend{instance=\"$instance\"}[5m])","format":"time_series","intervalFactor":1,"legendFormat":"buffers_backend","refId":"A"},{"expr":"irate(pg_stat_bgwriter_buffers_alloc{instance=\"$instance\"}[5m])","format":"time_series","intervalFactor":1,"legendFormat":"buffers_alloc","refId":"B"},{"expr":"irate(pg_stat_bgwriter_buffers_backend_fsync{instance=\"$instance\"}[5m])","format":"time_series","intervalFactor":1,"legendFormat":"backend_fsync","refId":"C"},{"expr":"irate(pg_stat_bgwriter_buffers_checkpoint{instance=\"$instance\"}[5m])","format":"time_series","intervalFactor":1,"legendFormat":"buffers_checkpoint","refId":"D"},{"expr":"irate(pg_stat_bgwriter_buffers_clean{instance=\"$instance\"}[5m])","format":"time_series","intervalFactor":1,"legendFormat":"buffers_clean","refId":"E"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Buffers (bgwriter)","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:3220","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:3221","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","decimals":2,"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":8,"x":8,"y":128},"hiddenSeries":false,"id":62,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"exemplar":true,"expr":"pg_stat_database_blks_hit{instance=\"$instance\", datname=~\"$datname\"} / (pg_stat_database_blks_read{instance=\"$instance\", datname=~\"$datname\"} + pg_stat_database_blks_hit{instance=\"$instance\", datname=~\"$datname\"})","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{ datname }}","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Cache Hit Rate","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"$$hashKey":"object:3140","decimals":4,"format":"percentunit","label":"","logBase":1,"max":null,"min":null,"show":true},{"$$hashKey":"object:3141","format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"Prometheus","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":8,"x":16,"y":128},"hiddenSeries":false,"id":70,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"8.2.4","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(pg_stat_bgwriter_checkpoint_write_time{instance=\"$instance\"}[5m])","format":"time_series","intervalFactor":1,"legendFormat":"write_time - Total amount of time that has been spent in the portion of checkpoint processing where files are written to disk.","refId":"B"},{"expr":"irate(pg_stat_bgwriter_checkpoint_sync_time{instance=\"$instance\"}[5m])","format":"time_series","intervalFactor":1,"legendFormat":"sync_time - Total amount of time that has been spent in the portion of checkpoint processing where files are synchronized to disk.","refId":"A"}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"Checkpoint Stats","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"ms","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":135},"id":76,"panels":[],"title":"Query","type":"row"},{"datasource":null,"description":"会话","fieldConfig":{"defaults":{"custom":{"align":null,"displayMode":"auto","filterable":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byName","options":"state"},"properties":[{"id":"custom.width","value":94}]},{"matcher":{"id":"byName","options":"datname"},"properties":[{"id":"custom.width","value":100}]},{"matcher":{"id":"byName","options":"client_addr"},"properties":[{"id":"custom.width","value":100}]}]},"gridPos":{"h":8,"w":24,"x":0,"y":136},"id":128,"options":{"showHeader":true,"sortBy":[]},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"pg_active_slowsql_query_runtime{datname=~\"$datname\", instance=~\"$instance\"}","format":"table","instant":true,"interval":"","legendFormat":"","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Session","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true,"Value":true,"__name__":true,"instance":true,"job":true,"server":true,"xact_runtime":true},"indexByName":{"Time":0,"Value":14,"__name__":1,"client_addr":4,"datname":2,"instance":5,"job":6,"pid":7,"query":12,"query_start":10,"server":13,"state":8,"usename":3,"xact_runtime":11,"xact_start":9},"renameByName":{"Value":"query runtime"}}}],"type":"table"},{"datasource":null,"description":"会话","fieldConfig":{"defaults":{"custom":{"align":null,"displayMode":"auto","filterable":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byName","options":"total_elapse_time"},"properties":[{"id":"custom.width","value":150},{"id":"unit","value":"µs"}]},{"matcher":{"id":"byName","options":"user_name"},"properties":[{"id":"custom.width","value":150}]},{"matcher":{"id":"byName","options":"max_elapse_time"},"properties":[{"id":"custom.width","value":140},{"id":"unit","value":"µs"}]},{"matcher":{"id":"byName","options":"min_elapse_time"},"properties":[{"id":"custom.width","value":140},{"id":"unit","value":"µs"}]},{"matcher":{"id":"byName","options":"unique_sql_id"},"properties":[{"id":"custom.width","value":120}]}]},"gridPos":{"h":8,"w":24,"x":0,"y":144},"id":142,"options":{"showHeader":true,"sortBy":[{"desc":true,"displayName":"total_elapse_time"}]},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"pg_sql_history_cpu_time","format":"table","instant":true,"interval":"","legendFormat":"","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"CPU Times","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true,"Value":false,"__name__":true,"instance":true,"job":true,"server":true,"xact_runtime":true},"indexByName":{"Time":1,"Value":6,"__name__":2,"instance":3,"job":4,"max_elapse_time":7,"min_elapse_time":8,"query":10,"server":5,"unique_sql_id":9,"user_name":0},"renameByName":{"Value":"total_elapse_time","job":""}}}],"type":"table"},{"datasource":null,"description":"会话","fieldConfig":{"defaults":{"custom":{"align":null,"displayMode":"auto","filterable":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byName","options":"calls"},"properties":[{"id":"custom.width","value":150}]},{"matcher":{"id":"byName","options":"user_name"},"properties":[{"id":"custom.width","value":150}]},{"matcher":{"id":"byName","options":"max_elapse_time"},"properties":[{"id":"custom.width","value":140},{"id":"unit","value":"µs"}]},{"matcher":{"id":"byName","options":"min_elapse_time"},"properties":[{"id":"custom.width","value":140},{"id":"unit","value":"µs"}]},{"matcher":{"id":"byName","options":"unique_sql_id"},"properties":[{"id":"custom.width","value":120}]}]},"gridPos":{"h":8,"w":24,"x":0,"y":152},"id":143,"options":{"showHeader":true,"sortBy":[{"desc":true,"displayName":"calls"}]},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"pg_sql_history_n_calls","format":"table","instant":true,"interval":"","legendFormat":"","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Calls","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true,"Value":false,"__name__":true,"instance":true,"job":true,"server":true,"xact_runtime":true},"indexByName":{"Time":1,"Value":6,"__name__":2,"instance":3,"job":4,"max_elapse_time":7,"min_elapse_time":8,"query":10,"server":5,"unique_sql_id":9,"user_name":0},"renameByName":{"Value":"calls","job":""}}}],"type":"table"},{"collapsed":false,"datasource":null,"gridPos":{"h":1,"w":24,"x":0,"y":160},"id":72,"panels":[],"title":"Tables and Indexes","type":"row"},{"datasource":null,"description":"","fieldConfig":{"defaults":{"custom":{"align":"center","displayMode":"auto","filterable":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byName","options":"schema"},"properties":[{"id":"custom.width"}]},{"matcher":{"id":"byName","options":"datname"},"properties":[{"id":"custom.width"}]},{"matcher":{"id":"byName","options":"relname"},"properties":[{"id":"custom.width"}]},{"matcher":{"id":"byName","options":"Value"},"properties":[{"id":"custom.width"},{"id":"unit","value":"decbytes"}]}]},"gridPos":{"h":6,"w":12,"x":0,"y":161},"id":132,"options":{"showHeader":true,"sortBy":[{"desc":true,"displayName":"Value"}]},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"pg_tables_size_bytes{datname=~\"$datname\", instance=~\"$instance\"}","format":"table","instant":true,"interval":"","legendFormat":"","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Table Size","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true,"Value":false,"__name__":true,"instance":true,"job":true,"server":true,"xact_runtime":true},"indexByName":{"Time":0,"Value":8,"__name__":1,"datname":2,"instance":3,"job":4,"nspname":6,"relname":7,"server":5},"renameByName":{"Value":"","nspname":"schema"}}}],"type":"table"},{"datasource":null,"description":"","fieldConfig":{"defaults":{"custom":{"align":"center","displayMode":"auto","filterable":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byName","options":"schema"},"properties":[{"id":"custom.width"}]},{"matcher":{"id":"byName","options":"datname"},"properties":[{"id":"custom.width"}]},{"matcher":{"id":"byName","options":"relname"},"properties":[{"id":"custom.width"}]},{"matcher":{"id":"byName","options":"Value"},"properties":[{"id":"custom.width"},{"id":"unit","value":"decbytes"}]}]},"gridPos":{"h":6,"w":12,"x":12,"y":161},"id":133,"options":{"showHeader":true,"sortBy":[]},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"pg_indexes_size_index_size{datname=~\"$datname\", instance=~\"$instance\"}","format":"table","instant":true,"interval":"","legendFormat":"","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Index Size","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true,"Value":false,"__name__":true,"instance":true,"job":true,"server":true,"xact_runtime":true},"indexByName":{"Time":0,"Value":9,"__name__":1,"datname":2,"index_name":8,"instance":3,"job":4,"schema_name":6,"server":5,"table_name":7},"renameByName":{"Value":"","nspname":"schema"}}}],"type":"table"},{"datasource":null,"description":"","fieldConfig":{"defaults":{"custom":{"align":"center","displayMode":"auto","filterable":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byName","options":"schema"},"properties":[{"id":"custom.width"}]},{"matcher":{"id":"byName","options":"datname"},"properties":[{"id":"custom.width"}]},{"matcher":{"id":"byName","options":"relname"},"properties":[{"id":"custom.width"}]},{"matcher":{"id":"byName","options":"Value"},"properties":[{"id":"custom.width"},{"id":"unit","value":"percent"}]}]},"gridPos":{"h":6,"w":24,"x":0,"y":167},"id":134,"options":{"showHeader":true,"sortBy":[]},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"pg_tables_expansion_rate_dead_rate{datname=~\"$datname\", instance=~\"$instance\"}","format":"table","instant":true,"interval":"","legendFormat":"","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Table Expansion Rate","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true,"Value":false,"__name__":true,"instance":true,"job":true,"server":true,"xact_runtime":true},"indexByName":{"Time":0,"Value":10,"__name__":1,"datname":2,"instance":3,"job":4,"n_dead_tup":9,"n_live_tup":8,"relname":7,"schemaname":6,"server":5},"renameByName":{"Value":"","nspname":"schema"}}}],"type":"table"},{"datasource":null,"description":"","fieldConfig":{"defaults":{"custom":{"align":"center","displayMode":"auto","filterable":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byName","options":"schema"},"properties":[{"id":"custom.width"}]},{"matcher":{"id":"byName","options":"datname"},"properties":[{"id":"custom.width"}]},{"matcher":{"id":"byName","options":"relname"},"properties":[{"id":"custom.width"}]},{"matcher":{"id":"byName","options":"Value"},"properties":[{"id":"custom.width"},{"id":"unit","value":"decbytes"}]}]},"gridPos":{"h":6,"w":24,"x":0,"y":173},"id":135,"options":{"showHeader":true,"sortBy":[]},"pluginVersion":"8.2.4","targets":[{"exemplar":true,"expr":"pg_never_used_indexes_index_size{datname=~\"$datname\", instance=~\"$instance\"}","format":"table","instant":true,"interval":"","legendFormat":"","refId":"A"}],"timeFrom":null,"timeShift":null,"title":"Never Used Indexes","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true,"Value":false,"__name__":true,"instance":true,"job":true,"server":true,"xact_runtime":true},"indexByName":{"Time":0,"Value":9,"__name__":1,"datname":2,"indexrelname":8,"instance":3,"job":4,"relname":7,"schemaname":6,"server":5},"renameByName":{"Value":"","nspname":"schema"}}}],"type":"table"}],"refresh":"","schemaVersion":32,"style":"dark","tags":[],"templating":{"list":[{"current":{"selected":false,"text":"Prometheus","value":"Prometheus"},"description":null,"error":null,"hide":0,"includeAll":false,"label":"datasource","multi":false,"name":"DS_PROMETHEUS","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"auto":true,"auto_count":200,"auto_min":"1s","current":{"selected":false,"text":"auto","value":"$__auto_interval_interval"},"description":null,"error":null,"hide":0,"label":"Interval","name":"interval","options":[{"selected":true,"text":"auto","value":"$__auto_interval_interval"},{"selected":false,"text":"1s","value":"1s"},{"selected":false,"text":"5s","value":"5s"},{"selected":false,"text":"1m","value":"1m"},{"selected":false,"text":"5m","value":"5m"},{"selected":false,"text":"1h","value":"1h"},{"selected":false,"text":"6h","value":"6h"},{"selected":false,"text":"1d","value":"1d"}],"query":"1s,5s,1m,5m,1h,6h,1d","refresh":2,"skipUrlSync":false,"type":"interval"},{"allValue":null,"current":{"isNone":true,"selected":false,"text":"None","value":""},"datasource":"Prometheus","definition":"","description":null,"error":null,"hide":0,"includeAll":false,"label":"Namespace","multi":false,"name":"namespace","options":[],"query":{"query":"query_result(pg_exporter_last_scrape_duration_seconds)","refId":"Prometheus-namespace-Variable-Query"},"refresh":2,"regex":"/.*kubernetes_namespace=\"([^\"]+).*/","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"isNone":true,"selected":false,"text":"None","value":""},"datasource":"Prometheus","definition":"","description":null,"error":null,"hide":0,"includeAll":false,"label":"Release","multi":false,"name":"release","options":[],"query":{"query":"query_result(pg_exporter_last_scrape_duration_seconds{kubernetes_namespace=\"$namespace\"})","refId":"Prometheus-release-Variable-Query"},"refresh":2,"regex":"/.*release=\"([^\"]+)/","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":false,"text":"172.16.3.90:9187","value":"172.16.3.90:9187"},"datasource":"Prometheus","definition":"","description":null,"error":null,"hide":0,"includeAll":false,"label":"Instance","multi":false,"name":"instance","options":[],"query":{"query":"query_result(pg_up{release=\"$release\"})","refId":"Prometheus-instance-Variable-Query"},"refresh":1,"regex":"/.*instance=\"([^\"]+).*/","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":false,"text":["All"],"value":["$__all"]},"datasource":"Prometheus","definition":"","description":null,"error":null,"hide":0,"includeAll":true,"label":"Database","multi":true,"name":"datname","options":[],"query":{"query":"label_values(datname)","refId":"Prometheus-datname-Variable-Query"},"refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"selected":false,"text":["All"],"value":["$__all"]},"datasource":"Prometheus","definition":"","description":null,"error":null,"hide":0,"includeAll":true,"label":"Lock table","multi":true,"name":"mode","options":[],"query":{"query":"label_values({mode=~\"accessexclusivelock|accesssharelock|exclusivelock|rowexclusivelock|rowsharelock|sharelock|sharerowexclusivelock|shareupdateexclusivelock\"}, mode)","refId":"Prometheus-mode-Variable-Query"},"refresh":1,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-5m","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"MogDB Database V1.1","uid":"Dd4rMhp7k","version":86}`}}
{{- end }}